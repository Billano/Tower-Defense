'use strict'

//Checks if no bot has reached the tower by comparing their current distance
var towerAlive = function (bots) {
  var length = bots.length;

  for (var i = 0; i < length; i++) {
    if (bots[i][1] <= 0) {
      return false;
    }
  }
  return true;
}

//Kills/removes the bot with highest priority and that is in firng range
// of the tower
var killBot = function (firingRange, bots, turn, print) {
  var length = bots.length;

  for (var i = 0; i < length; i++) {
    if (bots[i][1] <= firingRange) {
      if (print) {
        console.log("Turn " + turn + ": Kill " + bots[i][0] + " at "
        + bots[i][1] + "m");
      }
      bots.splice(i, 1);
      break ;
    }
  }
}

//kill all bots && updates their positions, and turns left to reach the tower
var killAllBots = function (firingRange, bots, print) {
  var turn = 1;

  while (bots.length > 0 && towerAlive(bots)) {
    killBot(firingRange, bots, turn, print);
    // Updates bots position and turns left to reach the tower
    bots.forEach(function (bot) {
      bot[1] -= bot[2];
      bot[3]--;
    });
    turn++;
  }
  return turn - 1;
}

module.exports = killAllBots;
